# CrowdStrike MSSP Monitor v2.0 - æ¶æ§‹è©³è§£

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CrowdStrike Falcon API                      â”‚
â”‚                    (us2.api.crowdstrike.com)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS / OAuth2
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Python Monitor Container                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  monitor.py                                                 â”‚ â”‚
â”‚  â”‚  - æ¯ 1 å°æ™‚æƒæä¸€æ¬¡                                         â”‚ â”‚
â”‚  â”‚  - ä½¿ç”¨ FalconPy SDK æŸ¥è©¢å„ç§Ÿæˆ¶ç«¯é»æ•¸                        â”‚ â”‚
â”‚  â”‚  - è¨ˆç®— Pinned CIDs ç¸½æ•¸                                    â”‚ â”‚
â”‚  â”‚  - é›™å¯«è³‡æ–™åˆ° InfluxDB + Prometheus                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                           â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           â”‚
            â”‚ HTTP POST                 â”‚ HTTP POST
            â”‚ (Line Protocol)           â”‚ (Pushgateway)
            â”‚                           â”‚
            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   InfluxDB v2.7       â”‚    â”‚  Prometheus Pushgateway  â”‚
â”‚   (æ™‚åºè³‡æ–™åº«)         â”‚    â”‚  (æŒ‡æ¨™æš«å­˜)               â”‚
â”‚                       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Bucket: crowdstrike  â”‚               â”‚
â”‚  Org: aishield        â”‚               â”‚ Pull Metrics
â”‚                       â”‚               â”‚
â”‚  Measurements:        â”‚               â–¼
â”‚  - crowdstrike_hosts  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  - pinned_summary     â”‚    â”‚    Prometheus v2.45      â”‚
â”‚                       â”‚    â”‚    (ç›£æ§å¼•æ“)             â”‚
â”‚  Tags:                â”‚    â”‚                          â”‚
â”‚  - cid                â”‚    â”‚  - æŠ“å– Telegraf æŒ‡æ¨™    â”‚
â”‚  - tenant_name        â”‚    â”‚  - æŠ“å– Pushgateway æŒ‡æ¨™ â”‚
â”‚  - is_pinned          â”‚    â”‚  - è©•ä¼°å‘Šè­¦è¦å‰‡          â”‚
â”‚  - parent_cid         â”‚    â”‚  - 30 å¤©è³‡æ–™ä¿ç•™         â”‚
â”‚                       â”‚    â”‚                          â”‚
â”‚  Fields:              â”‚    â”‚  Jobs:                   â”‚
â”‚  - host_count (int)   â”‚    â”‚  - pushgateway           â”‚
â”‚  - total_count (int)  â”‚    â”‚  - telegraf              â”‚
â”‚  - over_threshold     â”‚    â”‚  - docker                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           â”‚
            â”‚                           â”‚ Alerts
            â”‚                           â”‚
            â”‚                           â–¼
            â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚   AlertManager v0.26     â”‚
            â”‚                â”‚   (å‘Šè­¦ç®¡ç†)              â”‚
            â”‚                â”‚                          â”‚
            â”‚                â”‚  - æ”¶é›† Prometheus å‘Šè­¦  â”‚
            â”‚                â”‚  - åˆ†çµ„ã€æŠ‘åˆ¶ã€éœé»˜      â”‚
            â”‚                â”‚  - é€é SMTP ç™¼é€éƒµä»¶    â”‚
            â”‚                â”‚                          â”‚
            â”‚                â”‚  Routes:                 â”‚
            â”‚                â”‚  - Critical â†’ ç«‹å³ç™¼é€   â”‚
            â”‚                â”‚  - Warning â†’ æ‰¹æ¬¡ç™¼é€    â”‚
            â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           
            â”‚                           
            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    â”‚        Telegraf v1.29                â”‚
            â”‚    â”‚        (è³‡æ–™æ”¶é›†å™¨)                   â”‚
            â”‚    â”‚                                       â”‚
            â”‚    â”‚  Inputs:                              â”‚
            â”‚    â”‚  - Docker metrics (å®¹å™¨ç‹€æ…‹)          â”‚
            â”‚    â”‚  - System metrics (CPU, MEM, Disk)   â”‚
            â”‚    â”‚  - Prometheus Pushgateway            â”‚
            â”‚    â”‚  - InfluxDB listener                 â”‚
            â”‚    â”‚                                       â”‚
            â”‚    â”‚  Outputs:                             â”‚
            â”‚    â”‚  - InfluxDB v2 (å¯«å…¥ TSDB)           â”‚
            â”‚    â”‚  - Prometheus (expose :9273)         â”‚
            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚
            â”‚                    â”‚ Expose Metrics
            â”‚                    â”‚
            â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Grafana v10.x                             â”‚
â”‚                        (è¦–è¦ºåŒ–å¹³å°)                               â”‚
â”‚                                                                  â”‚
â”‚  Data Sources:                                                   â”‚
â”‚  â”œâ”€ InfluxDB (Primary) â”€â”€â”€â”€â”€â”€â–º æ­·å²è¶¨å‹¢åœ–è¡¨                      â”‚
â”‚  â””â”€ Prometheus (Secondary) â”€â”€â–º ç³»çµ±ç›£æ§ & å‘Šè­¦é¡¯ç¤º               â”‚
â”‚                                                                  â”‚
â”‚  Dashboards:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MSSP Monitor Overview                                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ“Š Pinned CIDs ç¸½æˆæ¬Šä½¿ç”¨é‡ (Time Series)                  â”‚ â”‚
â”‚  â”‚     - Xè»¸: æ™‚é–“ (å¯é¸ç¯„åœ)                                  â”‚ â”‚
â”‚  â”‚     - Yè»¸: ç«¯é»æ•¸é‡                                         â”‚ â”‚
â”‚  â”‚     - é–¾å€¼ç·š: 375 (ç´…è‰²)                                    â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ¯ æˆæ¬Šä½¿ç”¨ç‡å„€è¡¨æ¿ (Gauge)                                â”‚ â”‚
â”‚  â”‚     - å³æ™‚é¡¯ç¤º Pinned ä½¿ç”¨ç‡ %                              â”‚ â”‚
â”‚  â”‚     - é¡è‰²åˆ†ç´š (ç¶ /é»ƒ/æ©™/ç´…)                                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ“ˆ å„ç§Ÿæˆ¶ç«¯é»æ•¸é‡è¶¨å‹¢ (Time Series - Multi Select)         â”‚ â”‚
â”‚  â”‚     - è®Šæ•¸: $cid (æ”¯æ´å¤šé¸)                                 â”‚ â”‚
â”‚  â”‚     - å¯åŒæ™‚é¡¯ç¤º 1-100 å€‹ç§Ÿæˆ¶                               â”‚ â”‚
â”‚  â”‚     - Pinned ç§Ÿæˆ¶ç·šæ¢åŠ ç²—                                   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ“‹ ç•¶å‰æ‰€æœ‰ç§Ÿæˆ¶ç«¯é»æ•¸é‡ (Table)                            â”‚ â”‚
â”‚  â”‚     - æ¬„ä½: ç§Ÿæˆ¶åç¨±, CID, æ˜¯å¦ Pinned, ç«¯é»æ•¸             â”‚ â”‚
â”‚  â”‚     - æ”¯æ´æ’åºã€æœå°‹                                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âš ï¸  é‡é»ç§Ÿæˆ¶è®Šå‹•è¶¨å‹¢ (Time Series)                         â”‚ â”‚
â”‚  â”‚     - åªé¡¯ç¤º Pinned CIDs                                    â”‚ â”‚
â”‚  â”‚     - é«˜äº®é¡¯ç¤ºç•°å¸¸è®Šå‹•                                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ–¥ï¸  ç³»çµ±è³‡æºä½¿ç”¨ç‡ (Time Series)                          â”‚ â”‚
â”‚  â”‚     - CPU, Memory ä½¿ç”¨ç‡                                   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ³ Docker å®¹å™¨ç‹€æ…‹ (Stat)                                 â”‚ â”‚
â”‚  â”‚     - é‹è¡Œä¸­çš„å®¹å™¨æ•¸é‡                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  Annotations:                                                    â”‚
â”‚  - Prometheus Alerts (ç´…è‰²æ¨™è¨˜)                                 â”‚
â”‚                                                                  â”‚
â”‚  Variables:                                                      â”‚
â”‚  - $cid (Query from InfluxDB, Multi-select, Include All)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š è³‡æ–™æµå‘è©³è§£

### 1ï¸âƒ£ è³‡æ–™æ¡é›†éšæ®µ

```python
# monitor.py æ¯å°æ™‚åŸ·è¡Œä¸€æ¬¡
for cid, tenant_name in all_tenants:
    # å‘¼å« CrowdStrike API
    count = fetch_count(cid)
    
    # åŒæ™‚å¯«å…¥å…©å€‹ç³»çµ±
    write_to_influxdb(cid, tenant_name, count)
    push_to_prometheus(cid, tenant_name, count)
```

### 2ï¸âƒ£ InfluxDB è³‡æ–™çµæ§‹

```
Measurement: crowdstrike_hosts
â”œâ”€ Tags:
â”‚  â”œâ”€ cid: "f8a2dc956a4a4406ba2de099eef6b419"
â”‚  â”œâ”€ tenant_name: "KERRY TJ LOGISTICS"
â”‚  â”œâ”€ is_pinned: "True"
â”‚  â””â”€ parent_cid: "xxxxx"
â””â”€ Fields:
   â””â”€ host_count: 185

Measurement: crowdstrike_pinned_summary
â”œâ”€ Tags:
â”‚  â””â”€ threshold: "375"
â””â”€ Fields:
   â”œâ”€ total_count: 382
   â””â”€ over_threshold: 1
```

### 3ï¸âƒ£ Prometheus æŒ‡æ¨™çµæ§‹

```
# ç§Ÿæˆ¶ç«¯é»æ•¸é‡
crowdstrike_host_count{
  cid="f8a2dc956a4a4406ba2de099eef6b419",
  tenant_name="KERRY TJ LOGISTICS",
  is_pinned="True"
} 185

# Pinned ç¸½è¨ˆ
crowdstrike_pinned_total{
  threshold="375"
} 382
```

### 4ï¸âƒ£ Telegraf æ”¶é›†çš„é¡å¤–æŒ‡æ¨™

```
# Docker å®¹å™¨æŒ‡æ¨™
docker_container_cpu{
  container_name="mssp-monitor"
} 15.2

docker_container_mem{
  container_name="mssp-influxdb"
} 512000000

# ç³»çµ±æŒ‡æ¨™
cpu_usage_idle 75.3
mem_used_percent 65.2
disk_used_percent 45.8
```

## ğŸ”” å‘Šè­¦æµç¨‹

```
1. Prometheus æ¯ 15 ç§’è©•ä¼°è¦å‰‡
      â†“
2. ç™¼ç¾ç¬¦åˆæ¢ä»¶çš„å‘Šè­¦
   ä¾‹å¦‚: crowdstrike_pinned_total > 375
      â†“
3. é€²å…¥ "Pending" ç‹€æ…‹
   ç­‰å¾… 5 åˆ†é˜ç¢ºèª
      â†“
4. æŒçºŒè¶…éé–¾å€¼ â†’ "Firing" ç‹€æ…‹
      â†“
5. ç™¼é€åˆ° AlertManager
      â†“
6. AlertManager è™•ç†:
   - åˆ†çµ„ (æŒ‰ alertname, severity)
   - æŠ‘åˆ¶ (Critical å£“åˆ¶ Warning)
   - éœé»˜ (æ‰‹å‹•è¨­å®šçš„ç¶­è­·æœŸ)
      â†“
7. è·¯ç”±åˆ°æ­£ç¢ºçš„æ¥æ”¶å™¨:
   - Critical â†’ email-critical (ç«‹å³ç™¼é€)
   - Warning â†’ email-warnings (æ‰¹æ¬¡ç™¼é€)
      â†“
8. é€é SMTP ç™¼é€éƒµä»¶
      â†“
9. åœ˜éšŠæ”¶åˆ°å‘Šè­¦éƒµä»¶
```

## ğŸ¨ Grafana Dashboard äº’å‹•åŠŸèƒ½

### è®Šæ•¸é¸æ“‡å™¨ (Variables)

```
ä½ç½®: Dashboard å³ä¸Šè§’

è®Šæ•¸åç¨±: cid
é¡å‹: Query
è³‡æ–™æº: InfluxDB
æŸ¥è©¢: schema.tagValues(bucket: "crowdstrike", tag: "cid")
å¤šé¸: âœ… å•Ÿç”¨
Include All: âœ… å•Ÿç”¨

ä½¿ç”¨æ–¹å¼:
- é»æ“Šä¸‹æ‹‰é¸å–®
- å¯é¸æ“‡ä¸€å€‹æˆ–å¤šå€‹ CID
- é¸æ“‡ "All" é¡¯ç¤ºæ‰€æœ‰ç§Ÿæˆ¶
- åœ–è¡¨æœƒå³æ™‚æ›´æ–°
```

### æ™‚é–“ç¯„åœé¸æ“‡

```
ä½ç½®: Dashboard å³ä¸Šè§’

é è¨­ç¯„åœ: Last 24 hours
å¯é¸ç¯„åœ:
- Last 1 hour
- Last 6 hours
- Last 24 hours
- Last 7 days
- Last 30 days
- Custom range (è‡ªè¨‚)

è‡ªå‹•é‡æ–°æ•´ç†:
- Off
- 30s
- 1m (é è¨­)
- 5m
- 15m
```

### åœ–è¡¨äº’å‹•

```
1. ç¸®æ”¾ (Zoom)
   - æ»‘é¼ æ‹–æ›³é¸å–æ™‚é–“ç¯„åœ
   - é›™æ“Šæ¢å¾©åŸå§‹è¦–åœ–

2. åœ–ä¾‹ (Legend)
   - é»æ“Šåœ–ä¾‹å¯éš±è—/é¡¯ç¤ºè©²ç³»åˆ—
   - Ctrl+é»æ“Šåªé¡¯ç¤ºè©²ç³»åˆ—

3. å·¥å…·æç¤º (Tooltip)
   - æ‡¸åœé¡¯ç¤ºç²¾ç¢ºæ•¸å€¼
   - å¤šç³»åˆ—å…±äº«æ™‚é–“é»

4. è¡¨æ ¼æ’åº
   - é»æ“Šæ¬„ä½æ¨™é¡Œæ’åº
   - å†æ¬¡é»æ“Šåå‘æ’åº
```

## ğŸ” å®‰å…¨æ¶æ§‹

```
å¤–éƒ¨è¨ªå•
    â”‚
    â”œâ”€ Port 3000 (Grafana) â”€â”€â–º å»ºè­°åŠ  Nginx + SSL
    â”œâ”€ Port 9090 (Prometheus) â”€â”€â–º å»ºè­°åƒ…å…§ç¶²è¨ªå•
    â”œâ”€ Port 8086 (InfluxDB) â”€â”€â–º å»ºè­°åƒ…å…§ç¶²è¨ªå•
    â””â”€ Port 9093 (AlertManager) â”€â”€â–º å»ºè­°åƒ…å…§ç¶²è¨ªå•

å®¹å™¨é–“é€šè¨Š (Docker Network: monitoring)
    â”œâ”€ mssp-monitor â†â†’ influxdb (HTTP)
    â”œâ”€ mssp-monitor â†â†’ pushgateway (HTTP)
    â”œâ”€ telegraf â†â†’ influxdb (HTTP)
    â”œâ”€ telegraf â†â†’ prometheus (Metrics)
    â”œâ”€ prometheus â†â†’ pushgateway (Pull)
    â”œâ”€ prometheus â†â†’ alertmanager (Alert)
    â””â”€ grafana â†â†’ influxdb + prometheus (Query)

æ†‘è­‰ç®¡ç†
    â”œâ”€ CrowdStrike API â”€â”€â–º ç’°å¢ƒè®Šæ•¸ (.env)
    â”œâ”€ InfluxDB Token â”€â”€â–º ç’°å¢ƒè®Šæ•¸ (.env)
    â”œâ”€ Email Password â”€â”€â–º ç’°å¢ƒè®Šæ•¸ (.env)
    â””â”€ Grafana Password â”€â”€â–º ç’°å¢ƒè®Šæ•¸ (.env)
```

## ğŸ“ˆ è³‡æ–™ä¿ç•™èˆ‡å®¹é‡è¦åŠƒ

### è³‡æ–™é‡ä¼°ç®—

å‡è¨­ï¼š
- 50 å€‹ç§Ÿæˆ¶
- æ¯å°æ™‚æƒæä¸€æ¬¡
- æ¯å€‹ç§Ÿæˆ¶ä¸€ç­†è³‡æ–™é»

```
InfluxDB:
- æ¯å°æ™‚: 50 points
- æ¯å¤©: 50 Ã— 24 = 1,200 points
- æ¯æœˆ: 1,200 Ã— 30 = 36,000 points
- æ¯é»ç´„ 100 bytes
- æ¯æœˆè³‡æ–™é‡: 36,000 Ã— 100 = 3.6 MB

Prometheus:
- ä¿ç•™ 30 å¤©
- æ¯æœˆç´„ 3-5 MB (æŒ‡æ¨™ + ç³»çµ±ç›£æ§)

ç¸½è¨ˆ: ç´„ 10 MB/æœˆ
30 å¤©ä¿ç•™: ç´„ 300 MB
```

### å»ºè­°é…ç½®

```
ç§Ÿæˆ¶æ•¸é‡ | RAM | ç£ç¢Ÿ | CPU
---------|-----|------|-----
< 50     | 4GB | 20GB | 2æ ¸
50-100   | 8GB | 50GB | 4æ ¸
100-200  | 16GB| 100GB| 8æ ¸
> 200    | 32GB| 200GB| 16æ ¸
```

## ğŸ”„ é«˜å¯ç”¨æ€§æ–¹æ¡ˆ (å¯é¸)

```
                    Load Balancer
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                â–¼                â–¼
    Grafana-1        Grafana-2        Grafana-3
         â”‚                â”‚                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                 Shared InfluxDB Cluster
                 (InfluxDB Enterprise)
```

## ğŸ“š å»¶ä¼¸é–±è®€

- [InfluxDB Flux æŸ¥è©¢èªè¨€](https://docs.influxdata.com/flux/)
- [Prometheus PromQL æŒ‡å—](https://prometheus.io/docs/prometheus/latest/querying/basics/)
- [Grafana Dashboard æœ€ä½³å¯¦è¸](https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/best-practices/)
- [AlertManager é…ç½®åƒè€ƒ](https://prometheus.io/docs/alerting/latest/configuration/)
